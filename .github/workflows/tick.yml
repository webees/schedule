name: â±ï¸ è‡ªè°ƒåº¦æµ‹è¯•

on:
  schedule:
    - cron: '*/30 * * * *'       # å…œåº•: æ¯ 30 åˆ†é’Ÿ (é“¾æ–­è£‚æ—¶æ¢å¤)
  workflow_dispatch:              # æ‰‹åŠ¨è§¦å‘ (å¯åŠ¨é“¾æ¡)

concurrency:
  group: tick
  cancel-in-progress: false

permissions:
  actions: write
  contents: read

jobs:
  tick:
    runs-on: ubuntu-latest
    steps:
      - name: â±ï¸ æ—¶é—´æˆ³
        run: |
          echo "=== è‡ªè°ƒåº¦æµ‹è¯• ==="
          echo "UTC:   $(date -u '+%Y-%m-%d %H:%M:%S')"
          echo "è§¦å‘:  ${{ github.event_name }}"
          echo "Run#:  ${{ github.run_number }}"

      - name: ğŸ”„ è§¦å‘ä¸‹ä¸€è½® (3 åˆ†é’Ÿå)
        if: always()
        env:
          GH_TOKEN: ${{ github.token }}
        run: |
          echo "â³ ç­‰å¾… 150 ç§’..."
          sleep 150
          echo "ğŸš€ è§¦å‘ä¸‹ä¸€è½®"
          gh workflow run tick.yml -R ${{ github.repository }} 2>/dev/null || true
          echo "âœ… å·²è§¦å‘, UTC: $(date -u '+%H:%M:%S')"
